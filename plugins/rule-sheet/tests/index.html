<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>stylis rule sheet</title>
	<script src='../../../stylis.js'></script>
	<script src='../index.js'></script>
</head>
<body>

	<h1>Hello</h1>

<script>
var sample = `
	@import "./index.html";

	body {
		background: gray;
	}

	h1 {
		color: papayawhip;
	}

	h2 {
		color: red;

		div, h3 {
			width: 10px;
			color: red;
		}
	}

	div {
		font:none;
	}

	@keyframes hahaha {
	  from {top: 0;}
	  to {top: 100;}
	}

	@font-face {
		src: none;
	}

	@page {size:A4 landscape;}

	font-size: 2rem;
	padding: 16px;

	&:hover {
	  color: pink;
	  &.class {
	    color: purple;
	  }
	  &.some-class {
	    color: hotpink;
	  }
	}

	@media {
		content: "?";
	}

	&.other-class {
	  color: blue;
	  &:active {
	    color: red;
	  }
	}

	h1 {
		width: auto;

		div {
			height: 0;

			@media {
				color: blue;

				h2 {
					color: purple;
				}
			}
		}
	}

	textarea::placeholder,
	input::placeholder {
		color:red;
	}

	@supports(position: sticky){
    background: red;
  }
`

var sample = `
span { color: red }
@import url('something');
@font-face { font-family: test; src: url(test.woff); }
div { color: red }
`

var sample = `
@media (width: 0) {
  .test {
    margin-bottom: 1;
  }
  @supports (font: none) {
    .test {
      margin-top: 2;
    }
  }
}
`

var sample = `
  @media (max-width: 100) {
  	.a {
    	color: blue;
  	}
  	@supports (color:none) {
      .b {
        color: red;
      }
    }
  }

  div {
    @media (min-width: 500px) {
      color: pink;
    }
  }
`;

var sheet = document.head.appendChild(document.createElement('style')).sheet
var length = sheet.cssRules.length
var pool = []

var plugin = stylisRuleSheet((value) => {
	pool.push(value)
	// length = sheet.insertRule(value, length) + 1
})

stylis.use(plugin)
stylis('.a', sample)
console.log(pool.join(''))
</script>

</body>
</html>
